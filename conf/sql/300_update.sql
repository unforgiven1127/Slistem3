

ALTER TABLE `notification` ADD `content` text NOT NULL AFTER `title`;

-- Menu: YToxOntzOjI6ImVuIjthOjk6e2k6MDthOjEwOntzOjQ6Im5hbWUiO3M6NDoiSG9tZSI7czo0OiJsaW5rIjtzOjA6IiI7czo0OiJpY29uIjtzOjIwOiJwaWN0dXJlcy9ob21lXzQ4LnBuZyI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6MDoiIjtzOjQ6InR5cGUiO3M6MDoiIjtzOjY6ImFjdGlvbiI7czowOiIiO3M6MjoicGsiO2k6MDtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fXM6NToiY2hpbGQiO2E6Mzp7aTowO2E6OTp7czo0OiJuYW1lIjtzOjE0OiJNeSBDb25uZWN0aW9ucyI7czo0OiJsaW5rIjtzOjA6IiI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiNzc3LTI0OSI7czo0OiJ0eXBlIjtzOjI6ImN0IjtzOjY6ImFjdGlvbiI7czo1OiJwcGFmbCI7czoyOiJwayI7aTowO3M6Nzoib25jbGljayI7czowOiIiO3M6NToicmlnaHQiO2E6MTp7aTowO3M6NjoibG9nZ2VkIjt9fWk6MTthOjk6e3M6NDoibmFtZSI7czoxMjoiTXkgQ29tcGFuaWVzIjtzOjQ6ImxpbmsiO3M6MDoiIjtzOjY6InRhcmdldCI7czo3OiJfcGFyZW50IjtzOjM6InVpZCI7czo3OiI3NzctMjQ5IjtzOjQ6InR5cGUiO3M6MjoiY3AiO3M6NjoiYWN0aW9uIjtzOjU6InBwYWZsIjtzOjI6InBrIjtpOjA7czo3OiJvbmNsaWNrIjtzOjA6IiI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aToyO2E6MTA6e3M6NDoibmFtZSI7czoxNjoiTXkgb3Bwb3J0dW5pdGllcyI7czo0OiJsaW5rIjtzOjA6IiI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiNTU1LTEyMyI7czo0OiJ0eXBlIjtzOjM6Im9wcCI7czo2OiJhY3Rpb24iO3M6NDoicHBhbCI7czoyOiJwayI7aTowO3M6Nzoib25jbGljayI7czowOiIiO3M6NDoiaWNvbiI7czoyOToiL2NvbW1vbi9waWN0dXJlcy9jb2luc18xNi5wbmciO3M6NToicmlnaHQiO2E6MTp7aTowO3M6NjoibG9nZ2VkIjt9fX19aToxO2E6MTA6e3M6NDoibmFtZSI7czoxNjoiQ29ubmVjdGlvbnMgTGlzdCI7czo0OiJsaW5rIjtzOjA6IiI7czo0OiJpY29uIjtzOjI2OiJwaWN0dXJlcy9jb25uZWN0aW9uXzQ4LnBuZyI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiNzc3LTI0OSI7czo0OiJ0eXBlIjtzOjI6ImN0IjtzOjY6ImFjdGlvbiI7czo0OiJwcGFsIjtzOjI6InBrIjtpOjA7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO31zOjU6ImNoaWxkIjthOjQ6e2k6MDthOjEwOntzOjQ6Im5hbWUiO3M6MjE6IlNlYXJjaCBteSBDb25uZWN0aW9ucyI7czo0OiJsaW5rIjtzOjA6IiI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiNzc3LTI0OSI7czo0OiJ0eXBlIjtzOjI6ImN0IjtzOjY6ImFjdGlvbiI7czo0OiJwcGFsIjtzOjI6InBrIjtpOjA7czo3OiJsb2dpbnBrIjtpOjE7czo3OiJvbmNsaWNrIjtzOjA6IiI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aToxO2E6OTp7czo0OiJuYW1lIjtzOjE4OiJTZWFyY2ggQ29ubmVjdGlvbnMiO3M6NDoibGluayI7czowOiIiO3M6NjoidGFyZ2V0IjtzOjc6Il9wYXJlbnQiO3M6MzoidWlkIjtzOjc6Ijc3Ny0yNDkiO3M6NDoidHlwZSI7czoyOiJjdCI7czo2OiJhY3Rpb24iO3M6NDoicHBhbCI7czoyOiJwayI7aTowO3M6Nzoib25jbGljayI7czoxOToiYWRkUGFyYW1ldGVyKHRoaXMpOyI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aToyO2E6MTA6e3M6NDoibmFtZSI7czoxNDoiQWRkIENvbm5lY3Rpb24iO3M6NDoibGluayI7czowOiIiO3M6NjoidGFyZ2V0IjtzOjc6Il9wYXJlbnQiO3M6MzoidWlkIjtzOjc6Ijc3Ny0yNDkiO3M6NDoidHlwZSI7czoyOiJjdCI7czo2OiJhY3Rpb24iO3M6NDoicHBhYSI7czoyOiJwayI7aTowO3M6Nzoib25jbGljayI7czowOiIiO3M6NDoiaWNvbiI7czo1NToiL2NvbXBvbmVudC9hZGRyZXNzYm9vay9yZXNvdXJjZXMvcGljdHVyZXMvY3RfYWRkXzE2LnBuZyI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aTozO2E6MTA6e3M6NDoibmFtZSI7czoxNDoiQWRkIGEgcHJvc3BlY3QiO3M6NDoibGluayI7czowOiIiO3M6NjoidGFyZ2V0IjtzOjc6Il9wYXJlbnQiO3M6MzoidWlkIjtzOjc6Ijc3Ny0yNDkiO3M6NDoidHlwZSI7czoyOiJjdCI7czo2OiJhY3Rpb24iO3M6MTU6InBwYWEmcHJvc3BlY3Q9MSI7czoyOiJwayI7aTowO3M6Nzoib25jbGljayI7czowOiIiO3M6NDoiaWNvbiI7czo1NToiL2NvbXBvbmVudC9hZGRyZXNzYm9vay9yZXNvdXJjZXMvcGljdHVyZXMvY3RfYWRkXzE2LnBuZyI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319fX1pOjI7YToxMDp7czo0OiJuYW1lIjtzOjE0OiJDb21wYW5pZXMgTGlzdCI7czo0OiJsaW5rIjtzOjA6IiI7czo0OiJpY29uIjtzOjIzOiJwaWN0dXJlcy9jb21wYW55XzQ4LnBuZyI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiNzc3LTI0OSI7czo0OiJ0eXBlIjtzOjI6ImNwIjtzOjY6ImFjdGlvbiI7czo0OiJwcGFsIjtzOjI6InBrIjtpOjA7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO31zOjU6ImNoaWxkIjthOjM6e2k6MDthOjEwOntzOjQ6Im5hbWUiO3M6MTk6IlNlYXJjaCBNeSBDb21wYW5pZXMiO3M6NDoibGluayI7czowOiIiO3M6NjoidGFyZ2V0IjtzOjc6Il9wYXJlbnQiO3M6MzoidWlkIjtzOjc6Ijc3Ny0yNDkiO3M6NDoidHlwZSI7czoyOiJjcCI7czo2OiJhY3Rpb24iO3M6NDoicHBhbCI7czoyOiJwayI7aTowO3M6NzoibG9naW5wayI7aToxO3M6Nzoib25jbGljayI7czowOiIiO3M6NToicmlnaHQiO2E6MTp7aTowO3M6NjoibG9nZ2VkIjt9fWk6MTthOjk6e3M6NDoibmFtZSI7czoxNjoiU2VhcmNoIENvbXBhbmllcyI7czo0OiJsaW5rIjtzOjA6IiI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiNzc3LTI0OSI7czo0OiJ0eXBlIjtzOjI6ImNwIjtzOjY6ImFjdGlvbiI7czo0OiJwcGFsIjtzOjI6InBrIjtpOjA7czo3OiJvbmNsaWNrIjtzOjQzOiIgYWRkUGFyYW1ldGVyKHRoaXMpOyByZXNldENvbXBhbnlTZWFyY2goKTsgIjtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fX1pOjI7YToxMDp7czo0OiJuYW1lIjtzOjExOiJBZGQgQ29tcGFueSI7czo0OiJsaW5rIjtzOjA6IiI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiNzc3LTI0OSI7czo0OiJ0eXBlIjtzOjI6ImNwIjtzOjY6ImFjdGlvbiI7czo0OiJwcGFhIjtzOjI6InBrIjtpOjA7czo3OiJvbmNsaWNrIjtzOjA6IiI7czo0OiJpY29uIjtzOjU1OiIvY29tcG9uZW50L2FkZHJlc3Nib29rL3Jlc291cmNlcy9waWN0dXJlcy9jcF9hZGRfMTYucG5nIjtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fX19fWk6MzthOjEwOntzOjQ6Im5hbWUiO3M6ODoiUHJvamVjdHMiO3M6NDoibGluayI7czowOiIiO3M6NDoiaWNvbiI7czoyMzoicGljdHVyZXMvcHJvamVjdF80OC5wbmciO3M6NjoidGFyZ2V0IjtzOjc6Il9wYXJlbnQiO3M6MzoidWlkIjtzOjc6IjQ1Ni03ODkiO3M6NDoidHlwZSI7czozOiJwcmoiO3M6NjoiYWN0aW9uIjtzOjQ6InBwYWwiO3M6MjoicGsiO2k6MDtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fXM6NToiY2hpbGQiO2E6Mzp7aTowO2E6MTA6e3M6NDoibmFtZSI7czo4OiJNeSB0YXNrcyI7czo0OiJsaW5rIjtzOjA6IiI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiNDU2LTc4OSI7czo0OiJ0eXBlIjtzOjQ6InRhc2siO3M6NjoiYWN0aW9uIjtzOjQ6InBwYWwiO3M6MjoicGsiO2k6MDtzOjc6ImxvZ2lucGsiO2k6MTtzOjc6Im9uY2xpY2siO3M6MDoiIjtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fX1pOjE7YTo5OntzOjQ6Im5hbWUiO3M6MTM6IlByb2plY3RzIExpc3QiO3M6NDoibGluayI7czowOiIiO3M6NjoidGFyZ2V0IjtzOjc6Il9wYXJlbnQiO3M6MzoidWlkIjtzOjc6IjQ1Ni03ODkiO3M6NDoidHlwZSI7czozOiJwcmoiO3M6NjoiYWN0aW9uIjtzOjQ6InBwYWwiO3M6MjoicGsiO2k6MDtzOjc6Im9uY2xpY2siO3M6MDoiIjtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fX1pOjM7YTo5OntzOjQ6Im5hbWUiO3M6MTM6IlByb2plY3QgVXNlcnMiO3M6NDoibGluayI7czowOiIiO3M6NjoidGFyZ2V0IjtzOjc6Il9wYXJlbnQiO3M6MzoidWlkIjtzOjc6IjQ1Ni03ODkiO3M6NDoidHlwZSI7czo2OiJwcmphY3IiO3M6NjoiYWN0aW9uIjtzOjQ6InBwYWUiO3M6MjoicGsiO2k6MDtzOjc6Im9uY2xpY2siO3M6MDoiIjtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fX19fWk6NDthOjk6e3M6NDoibmFtZSI7czoyMDoiU2hhcmVkIGRvY3VtZW50IExpc3QiO3M6NDoibGluayI7czowOiIiO3M6NDoiaWNvbiI7czoyODoicGljdHVyZXMvc2hhcmVkX3NwYWNlXzQ4LnBuZyI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiOTk5LTExMSI7czo0OiJ0eXBlIjtzOjU6InNoZG9jIjtzOjY6ImFjdGlvbiI7czo0OiJwcGFsIjtzOjI6InBrIjtpOjA7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aTo1O2E6MTA6e3M6NDoibmFtZSI7czo4OiJDb250YWN0cyI7czo0OiJsaW5rIjtzOjA6IiI7czo0OiJpY29uIjtzOjIzOiJwaWN0dXJlcy9jb250YWN0XzQ4LnBuZyI7czo2OiJ0YXJnZXQiO3M6NzoiX3BhcmVudCI7czozOiJ1aWQiO3M6NzoiNTc5LTcwNCI7czo0OiJ0eXBlIjtzOjM6InVzciI7czo2OiJhY3Rpb24iO3M6NDoicHBhbCI7czoyOiJwayI7aTowO3M6NToicmlnaHQiO2E6MTp7aTowO3M6NjoibG9nZ2VkIjt9czo1OiJjaGlsZCI7YToxOntpOjA7YToxMDp7czo0OiJuYW1lIjtzOjEwOiJPcmdhbmlncmFtIjtzOjQ6ImxpbmsiO3M6MjY6Ii9tZWRpYS9iY19vcmdhbml6YXRpb24ucGRmIjtzOjY6InRhcmdldCI7czo2OiJfYmxhbmsiO3M6MzoidWlkIjtzOjA6IiI7czo0OiJ0eXBlIjtzOjA6IiI7czo2OiJhY3Rpb24iO3M6MDoiIjtzOjI6InBrIjtpOjA7czo3OiJsb2dpbnBrIjtpOjA7czo3OiJvbmNsaWNrIjtzOjA6IiI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319fX1pOjg7YToxMjp7czo0OiJuYW1lIjtzOjg6IkNhbGVuZGFyIjtzOjQ6ImxpbmsiO3M6MDoiIjtzOjQ6Imljb24iO3M6MjQ6InBpY3R1cmVzL2NhbGVuZGFyXzQ4LnBuZyI7czo2OiJ0YXJnZXQiO3M6MDoiIjtzOjM6InVpZCI7czo3OiI0MDAtNjUwIjtzOjQ6InR5cGUiO3M6ODoiY2FsZW5kYXIiO3M6NjoiYWN0aW9uIjtzOjQ6InBwYXYiO3M6MjoicGsiO2k6LTE7czo5OiJhamF4cG9wdXAiO2k6MDtzOjc6ImxvZ2lucGsiO2k6MTtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fXM6NToiY2hpbGQiO2E6Mzp7aTowO2E6ODp7czo0OiJuYW1lIjtzOjExOiJNeSBjYWxlbmRhciI7czozOiJ1aWQiO3M6NzoiNDAwLTY1MCI7czo0OiJ0eXBlIjtzOjg6ImNhbGVuZGFyIjtzOjY6ImFjdGlvbiI7czo0OiJwcGF2IjtzOjI6InBrIjtpOi0xO3M6OToiYWpheHBvcHVwIjtpOjA7czo0OiJpY29uIjtzOjM4OiIvY29tbW9uL3BpY3R1cmVzL2l0ZW1zL2NhbGVuZGFyXzE2LnBuZyI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aToxO2E6ODp7czo0OiJuYW1lIjtzOjE1OiJTaGFyZWQgY2FsZW5kYXIiO3M6MzoidWlkIjtzOjc6IjQwMC02NTAiO3M6NDoidHlwZSI7czo4OiJjYWxlbmRhciI7czo2OiJhY3Rpb24iO3M6NDoicHBhdiI7czoyOiJwayI7aTowO3M6OToiYWpheHBvcHVwIjtpOjA7czo0OiJpY29uIjtzOjM4OiIvY29tbW9uL3BpY3R1cmVzL2l0ZW1zL2NhbGVuZGFyXzE2LnBuZyI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aToyO2E6ODp7czo0OiJuYW1lIjtzOjI5OiJBZGQgYW4gZXZlbnQgaW4geW91ciBjYWxlbmRhciI7czozOiJ1aWQiO3M6NzoiNDAwLTY1MCI7czo0OiJ0eXBlIjtzOjg6ImNhbGVuZGFyIjtzOjY6ImFjdGlvbiI7czo0OiJwcGFhIjtzOjI6InBrIjtpOjA7czo5OiJhamF4cG9wdXAiO2k6MDtzOjQ6Imljb24iO3M6NDI6Ii9jb21tb24vcGljdHVyZXMvaXRlbXMvY2FsZW5kYXJfYWRkXzE2LnBuZyI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319fX1pOjk7YToxMjp7czo0OiJuYW1lIjtzOjE0OiJPdGhlciBmZWF0dXJlcyI7czo0OiJsaW5rIjtzOjEyOiJqYXZhc2NyaXB0OjsiO3M6NDoiaWNvbiI7czoyNjoicGljdHVyZXMvbWVudV9vdGhlcl80OC5wbmciO3M6NjoidGFyZ2V0IjtzOjA6IiI7czozOiJ1aWQiO3M6MDoiIjtzOjQ6InR5cGUiO3M6MDoiIjtzOjY6ImFjdGlvbiI7czowOiIiO3M6MjoicGsiO2k6MDtzOjk6ImFqYXhwb3B1cCI7aTowO3M6NzoibG9naW5wayI7aToxO3M6NToicmlnaHQiO2E6MTp7aTowO3M6NjoibG9nZ2VkIjt9czo1OiJjaGlsZCI7YTo0OntpOjI7YToxMTp7czo0OiJuYW1lIjtzOjEyOiJBZGQgcmVtaW5kZXIiO3M6NDoibGluayI7czoxMjoiamF2YXNjcmlwdDo7IjtzOjQ6Imljb24iO3M6NjI6Ii9jb21wb25lbnQvbm90aWZpY2F0aW9uL3Jlc291cmNlcy9waWN0dXJlcy9yZW1pbmRlcl9hZGRfMjQucG5nIjtzOjY6InRhcmdldCI7czowOiIiO3M6MzoidWlkIjtzOjA6IiI7czo0OiJ0eXBlIjtzOjA6IiI7czo2OiJhY3Rpb24iO3M6MDoiIjtzOjI6InBrIjtpOjA7czo5OiJhamF4cG9wdXAiO2k6MDtzOjc6Im9uY2xpY2siO3M6NDMxOiIKICAgICAgICAgIHZhciBzVVJMID0gJy9pbmRleC5waHA1P3VpZD0zMzMtMzMzJnBwYT1wcGFhJnBwdD1ub3QmcGc9YWp4JzsKCiAgICAgICAgICAvKnZhciBvSXRlbSA9ICQoJy5jYW5kaVRvcFNlY3RMZWZ0OnZpc2libGUgLml0ZW1EYXRhRGVzY3JpcHRpb24nKTsKICAgICAgICAgIGlmKG9JdGVtLmxlbmd0aCkKICAgICAgICAgICAgc1VSTCs9ICcmY3BfaXRlbV9zZWxlY3Rvcj0nK2VuY29kZVVSSSgkKG9JdGVtKS5hdHRyKCdkYXRhLWNwX2l0ZW1fc2VsZWN0b3InKSk7Ki8KCiAgICAgICAgICB2YXIgb0NvbmYgPSBnb1BvcHVwLmdldENvbmZpZygpOwogICAgICAgICAgb0NvbmYuaGVpZ2h0ID0gNTAwOwogICAgICAgICAgb0NvbmYud2lkdGggPSA4NTA7CiAgICAgICAgICBnb1BvcHVwLnNldExheWVyRnJvbUFqYXgob0NvbmYsIHNVUkwpOwogICAgICAgICI7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aTozO2E6MTI6e3M6NDoibmFtZSI7czoxNDoiVmlldyByZW1pbmRlcnMiO3M6NDoibGluayI7czowOiIiO3M6NDoiaWNvbiI7czo1ODoiL2NvbXBvbmVudC9ub3RpZmljYXRpb24vcmVzb3VyY2VzL3BpY3R1cmVzL3JlbWluZGVyXzI0LnBuZyI7czo2OiJ0YXJnZXQiO3M6MDoiIjtzOjM6InVpZCI7czo3OiIzMzMtMzMzIjtzOjQ6InR5cGUiO3M6Mzoibm90IjtzOjY6ImFjdGlvbiI7czo0OiJwcGFsIjtzOjI6InBrIjtpOjA7czo5OiJhamF4cG9wdXAiO2k6MTtzOjExOiJwb3B1cF93aWR0aCI7aToxMDgwO3M6MTI6InBvcHVwX2hlaWdodCI7aTo3MjU7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aTo0O2E6MTA6e3M6NDoibmFtZSI7czoxNDoiWmltYnJhIHdlYm1haWwiO3M6NDoibGluayI7czoyODoiaHR0cHM6Ly9tYWlsLmJ1bGJvdXNjZWxsLmNvbSI7czo0OiJpY29uIjtzOjIwOiJwaWN0dXJlcy9tYWlsXzI0LnBuZyI7czo2OiJ0YXJnZXQiO3M6NjoiX2JsYW5rIjtzOjM6InVpZCI7czowOiIiO3M6NDoidHlwZSI7czowOiIiO3M6NjoiYWN0aW9uIjtzOjA6IiI7czoyOiJwayI7aTowO3M6OToiZW1iZWRMaW5rIjtpOjA7czo1OiJyaWdodCI7YToxOntpOjA7czo2OiJsb2dnZWQiO319aTo1O2E6MTE6e3M6NDoibmFtZSI7czoxNDoiRW1haWwgZnJvbSBCQ00iO3M6NDoibGluayI7czowOiIiO3M6NDoiaWNvbiI7czoyMzoicGljdHVyZXMvd2VibWFpbF8yNC5wbmciO3M6NjoidGFyZ2V0IjtzOjA6IiI7czozOiJ1aWQiO3M6NzoiMDA5LTcyNCI7czo0OiJ0eXBlIjtzOjc6IndlYm1haWwiO3M6NjoiYWN0aW9uIjtzOjQ6InBwYWEiO3M6MjoicGsiO2k6MDtzOjk6ImFqYXhwb3B1cCI7aToxO3M6NzoibG9naW5wayI7aToxO3M6NToicmlnaHQiO2E6MTp7aTowO3M6NjoibG9nZ2VkIjt9fX19aToxMDthOjEyOntzOjQ6Im5hbWUiO3M6MzoiQkNNIjtzOjQ6ImxpbmsiO3M6MTI6ImphdmFzY3JpcHQ6OyI7czo0OiJpY29uIjtzOjM0OiIvY29tbW9uL3BpY3R1cmVzL21lbnUvYmNtX21lbnUucG5nIjtzOjY6InRhcmdldCI7czowOiIiO3M6MzoidWlkIjtzOjA6IiI7czo0OiJ0eXBlIjtzOjA6IiI7czo2OiJhY3Rpb24iO3M6MDoiIjtzOjI6InBrIjtpOjA7czo5OiJhamF4cG9wdXAiO2k6MDtzOjc6ImxvZ2lucGsiO2k6MTtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fXM6NToiY2hpbGQiO2E6Mzp7aTowO2E6MTE6e3M6NDoibmFtZSI7czo2OiJMb2dvdXQiO3M6NDoibGluayI7czoxMjoiamF2YXNjcmlwdDo7IjtzOjc6Im9uY2xpY2siO3M6Nzg6IkFqYXhSZXF1ZXN0KCcvaW5kZXgucGhwNT91aWQ9NTc5LTcwNCZwcGE9cHBhbGd0JnBwdD0mcHBrPTAmbG9nb3V0PTEmcGc9YWp4Jyk7ICI7czo0OiJpY29uIjtzOjI1OiIvbWVkaWEvcGljdHVyZS9sb2dvdXQucG5nIjtzOjY6InRhcmdldCI7czowOiIiO3M6MzoidWlkIjtzOjA6IiI7czo0OiJ0eXBlIjtzOjA6IiI7czo2OiJhY3Rpb24iO3M6MDoiIjtzOjI6InBrIjtpOjA7czo5OiJlbWJlZExpbmsiO2k6MDtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fX1pOjE7YToxMTp7czo0OiJuYW1lIjtzOjEwOiJNeSBhY2NvdW50IjtzOjQ6ImxpbmsiO3M6MDoiIjtzOjQ6Imljb24iO3M6Mzk6Ii9jb21tb24vcGljdHVyZXMvbWVudS91c2VyX3NldHRpbmdzLnBuZyI7czo2OiJ0YXJnZXQiO3M6MDoiIjtzOjM6InVpZCI7czo3OiI1NzktNzA0IjtzOjQ6InR5cGUiO3M6MzoidXNyIjtzOjY6ImFjdGlvbiI7czo0OiJwcGFlIjtzOjI6InBrIjtpOjA7czo5OiJhamF4cG9wdXAiO2k6MDtzOjc6ImxvZ2lucGsiO2k6MDtzOjU6InJpZ2h0IjthOjE6e2k6MDtzOjY6ImxvZ2dlZCI7fX1pOjI7YToxMTp7czo0OiJuYW1lIjtzOjE0OiJBZG1pbmlzdHJhdGlvbiI7czo0OiJsaW5rIjtzOjA6IiI7czo0OiJpY29uIjtzOjM0OiIvY29tbW9uL3BpY3R1cmVzL21lbnUvc2V0dGluZ3MucG5nIjtzOjY6InRhcmdldCI7czowOiIiO3M6MzoidWlkIjtzOjc6IjY2NS01NDQiO3M6NDoidHlwZSI7czozOiJzdGciO3M6NjoiYWN0aW9uIjtzOjQ6InBwYWEiO3M6MjoicGsiO2k6MDtzOjk6ImFqYXhwb3B1cCI7aTowO3M6NzoibG9naW5wayI7aTowO3M6NToicmlnaHQiO2E6MTp7aTowO3M6MTQ6ImFkbWluaXN0cmF0aW9uIjt9fX19fX0=




DROP TABLE IF EXISTS `notification`;
CREATE TABLE `notification` (
  `notificationpk` int(11) NOT NULL AUTO_INCREMENT,
  `date_created` datetime NOT NULL,
  `creatorfk` int(11) NOT NULL,
  `date_notification` datetime NOT NULL,
  `title` text COLLATE utf8_unicode_ci,
  `content` text COLLATE utf8_unicode_ci NOT NULL,
  `message` text COLLATE utf8_unicode_ci NOT NULL,
  `message_format` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `delivered` int(11) NOT NULL COMMENT '0: default status, 1: delivered, 2: cancelled, -1: failed once, 999: failed multiple times',
  PRIMARY KEY (`notificationpk`),
  KEY `creatorfk` (`creatorfk`),
  KEY `date_notification` (`date_notification`),
  KEY `type` (`type`),
  KEY `deliverd` (`delivered`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

-- --------------------------------------------------------
DROP TABLE IF EXISTS `notification_action`;
CREATE TABLE `notification_action` (
  `notification_actionpk` int(11) NOT NULL AUTO_INCREMENT,
  `notificationfk` int(11) NOT NULL,
  `type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `naggy` int(11) NOT NULL,
  `naggy_frequency` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `naggy_confirmed` int(11) DEFAULT NULL,
  `number_sent` int(11) NOT NULL,
  `date_last_action` datetime DEFAULT NULL,
  `status` int(11) NOT NULL,
  PRIMARY KEY (`notification_actionpk`),
  KEY `notificationfk` (`notificationfk`),
  KEY `type` (`type`),
  KEY `naggy_frequency` (`naggy_frequency`),
  KEY `status` (`status`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

-- --------------------------------------------------------
DROP TABLE IF EXISTS `notification_link`;
CREATE TABLE `notification_link` (
  `notification_linkpk` int(11) NOT NULL AUTO_INCREMENT,
  `notificationfk` int(11) NOT NULL,
  `linked_to` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `cp_uid` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `cp_action` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `cp_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `cp_pk` int(11) NOT NULL,
  PRIMARY KEY (`notification_linkpk`),
  KEY `notificationfk` (`notificationfk`),
  KEY `uid` (`cp_uid`),
  KEY `action` (`cp_action`),
  KEY `type` (`cp_type`),
  KEY `pk` (`cp_pk`),
  KEY `linked_to` (`linked_to`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

-- --------------------------------------------------------
DROP TABLE IF EXISTS `notification_recipient`;
CREATE TABLE `notification_recipient` (
  `notification_recipientpk` int(11) NOT NULL AUTO_INCREMENT,
  `notificationfk` int(11) NOT NULL,
  `loginfk` int(11) NOT NULL,
  `email` text COLLATE utf8_unicode_ci,
  PRIMARY KEY (`notification_recipientpk`),
  KEY `notificationfk` (`notificationfk`),
  KEY `loginfk` (`loginfk`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;



INSERT INTO `version` (`version`, date_version) VALUES ('3.0.0u', NOW());





-- redoing all the messed up opportunity rights
INSERT INTO `right` (`rightpk`, `label`, `description`, `type`, `cp_uid`, `cp_action`, `cp_type`)
VALUES (157, '4. Opportunity user', 'Access opportunity module', 'right', '555-123', 'ppav', 'opp');


UPDATE `right` SET `label` = '3. Opportunity manager' WHERE rightpk = 104;
UPDATE `right` SET `label` = '2. Product supervisor' WHERE rightpk = 155;
UPDATE `right` SET `label` = '1. Opportunity paiement', description = 'Allow to change the status to "paid"' WHERE rightpk = 98;
UPDATE `right` SET `label` = 'Set opportunity paid', description = 'Allow to change the status to "paid"' WHERE rightpk = 99;

-- affect all existing false "manager" rights to the one just created
UPDATE right_tree SET parentfk = 157 WHERE parentfk = 104;


-- now fix the right order: Pay --> Prod sup -->: Manager --> user
DELETE FROM right_tree WHERE rightfk IN (98, 140, 152, 155, 98, 104, 156);
DELETE FROM `right` WHERE rightpk = 140;

-- Manager = user + view all + view company.
INSERT INTO `right_tree` (`rightfk`, `parentfk`) VALUES (157, 104), (152, 104);

-- Product supervisor = manager + edit prod status
INSERT INTO `right_tree` (`rightfk`, `parentfk`) VALUES (104, 155), (156, 155);

-- Payment = include prod sup + specific right for payment
INSERT INTO `right_tree` (`rightfk`, `parentfk`) VALUES (155, 98);



INSERT INTO `version` (`version`, date_version) VALUES ('3.0.3u', NOW());



-- stef optimize event search
-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-- Need to change mycnf config: search down to 2 char !!
-- http://stackoverflow.com/questions/2627940/remove-html-tags-from-record
DELIMITER |
CREATE FUNCTION `strip_tags`($str text) RETURNS text
BEGIN
    DECLARE $start, $end INT DEFAULT 1;
    LOOP
        SET $start = LOCATE("<", $str, $start);
        IF (!$start) THEN RETURN $str; END IF;
        SET $end = LOCATE(">", $str, $start);
        IF (!$end) THEN SET $end = $start; END IF;
        SET $str = INSERT($str, $start, $end - $start + 1, "");
    END LOOP;
END; |
DELIMITER ;


ALTER TABLE `event` ADD `_fts` TEXT NULL ;

UPDATE `event` SET _fts = strip_tags(content);
ALTER TABLE `event` ADD FULLTEXT INDEX `_fts` (`_fts`);

INSERT INTO `version` (`version`, date_version) VALUES ('3.0.4u', NOW());


-- 04-03-2014 : add user nationality

ALTER TABLE `login` ADD `nationalityfk` INT NULL AFTER `phone_ext` , ADD INDEX ( `nationalityfk` ) ;
ALTER TABLE `system_nationality` ADD `iso` VARCHAR( 32 ) NULL AFTER `nationality_name` , ADD INDEX ( `iso` ) ;

UPDATE system_nationality SET iso = "AFG " WHERE nationality_name LIKE "Afghanistan";
UPDATE system_nationality SET iso = "ALA " WHERE nationality_name LIKE "Åland Islands";
UPDATE system_nationality SET iso = "ALB " WHERE nationality_name LIKE "Albania";
UPDATE system_nationality SET iso = "DZA " WHERE nationality_name LIKE "Algeria";
UPDATE system_nationality SET iso = "ASM " WHERE nationality_name LIKE "American Samoa";
UPDATE system_nationality SET iso = "AND " WHERE nationality_name LIKE "Andorra";
UPDATE system_nationality SET iso = "AGO " WHERE nationality_name LIKE "Angola";
UPDATE system_nationality SET iso = "AIA " WHERE nationality_name LIKE "Anguilla";
UPDATE system_nationality SET iso = "ATA " WHERE nationality_name LIKE "Antarctica";
UPDATE system_nationality SET iso = "ATG " WHERE nationality_name LIKE "Antigua and Barbuda";
UPDATE system_nationality SET iso = "ARG " WHERE nationality_name LIKE "Argentina";
UPDATE system_nationality SET iso = "ARM " WHERE nationality_name LIKE "Armenia";
UPDATE system_nationality SET iso = "ABW " WHERE nationality_name LIKE "Aruba";
UPDATE system_nationality SET iso = "AUS " WHERE nationality_name LIKE "Australia";
UPDATE system_nationality SET iso = "AUT " WHERE nationality_name LIKE "Austria";
UPDATE system_nationality SET iso = "AZE " WHERE nationality_name LIKE "Azerbaijan";
UPDATE system_nationality SET iso = "BHS " WHERE nationality_name LIKE "Bahamas";
UPDATE system_nationality SET iso = "BHR " WHERE nationality_name LIKE "Bahrain";
UPDATE system_nationality SET iso = "BGD " WHERE nationality_name LIKE "Bangladesh";
UPDATE system_nationality SET iso = "BRB " WHERE nationality_name LIKE "Barbados";
UPDATE system_nationality SET iso = "BLR " WHERE nationality_name LIKE "Belarus";
UPDATE system_nationality SET iso = "BEL " WHERE nationality_name LIKE "Belgium";
UPDATE system_nationality SET iso = "BLZ " WHERE nationality_name LIKE "Belize";
UPDATE system_nationality SET iso = "BEN " WHERE nationality_name LIKE "Benin";
UPDATE system_nationality SET iso = "BMU " WHERE nationality_name LIKE "Bermuda";
UPDATE system_nationality SET iso = "BTN " WHERE nationality_name LIKE "Bhutan";
UPDATE system_nationality SET iso = "BOL " WHERE nationality_name LIKE "Bolivia, Plurinational State of";
UPDATE system_nationality SET iso = "BES " WHERE nationality_name LIKE "Bonaire, Sint Eustatius and Saba";
UPDATE system_nationality SET iso = "BIH " WHERE nationality_name LIKE "Bosnia and Herzegovina";
UPDATE system_nationality SET iso = "BWA " WHERE nationality_name LIKE "Botswana";
UPDATE system_nationality SET iso = "BVT " WHERE nationality_name LIKE "Bouvet Island";
UPDATE system_nationality SET iso = "BRA " WHERE nationality_name LIKE "Brazil";
UPDATE system_nationality SET iso = "IOT " WHERE nationality_name LIKE "British Indian Ocean Territory";
UPDATE system_nationality SET iso = "BRN " WHERE nationality_name LIKE "Brunei Darussalam";
UPDATE system_nationality SET iso = "BGR " WHERE nationality_name LIKE "Bulgaria";
UPDATE system_nationality SET iso = "BFA " WHERE nationality_name LIKE "Burkina Faso";
UPDATE system_nationality SET iso = "BDI " WHERE nationality_name LIKE "Burundi";
UPDATE system_nationality SET iso = "KHM " WHERE nationality_name LIKE "Cambodia";
UPDATE system_nationality SET iso = "CMR " WHERE nationality_name LIKE "Cameroon";
UPDATE system_nationality SET iso = "CAN " WHERE nationality_name LIKE "Canada";
UPDATE system_nationality SET iso = "CPV " WHERE nationality_name LIKE "Cape Verde";
UPDATE system_nationality SET iso = "CYM " WHERE nationality_name LIKE "Cayman Islands";
UPDATE system_nationality SET iso = "CAF " WHERE nationality_name LIKE "Central African Republic";
UPDATE system_nationality SET iso = "TCD " WHERE nationality_name LIKE "Chad";
UPDATE system_nationality SET iso = "CHL " WHERE nationality_name LIKE "Chile";
UPDATE system_nationality SET iso = "CHN " WHERE nationality_name LIKE "China";
UPDATE system_nationality SET iso = "CXR " WHERE nationality_name LIKE "Christmas Island";
UPDATE system_nationality SET iso = "CCK " WHERE nationality_name LIKE "Cocos (Keeling) Islands";
UPDATE system_nationality SET iso = "COL " WHERE nationality_name LIKE "Colombia";
UPDATE system_nationality SET iso = "COM " WHERE nationality_name LIKE "Comoros";
UPDATE system_nationality SET iso = "COG " WHERE nationality_name LIKE "Congo";
UPDATE system_nationality SET iso = "COD " WHERE nationality_name LIKE "Congo, the Democratic Republic of the";
UPDATE system_nationality SET iso = "COK " WHERE nationality_name LIKE "Cook Islands";
UPDATE system_nationality SET iso = "CRI " WHERE nationality_name LIKE "Costa Rica";
UPDATE system_nationality SET iso = "CIV " WHERE nationality_name LIKE "Côte d'Ivoire";
UPDATE system_nationality SET iso = "HRV " WHERE nationality_name LIKE "Croatia";
UPDATE system_nationality SET iso = "CUB " WHERE nationality_name LIKE "Cuba";
UPDATE system_nationality SET iso = "CUW " WHERE nationality_name LIKE "Curaçao";
UPDATE system_nationality SET iso = "CYP " WHERE nationality_name LIKE "Cyprus";
UPDATE system_nationality SET iso = "CZE " WHERE nationality_name LIKE "Czech Republic";
UPDATE system_nationality SET iso = "DNK " WHERE nationality_name LIKE "Denmark";
UPDATE system_nationality SET iso = "DJI " WHERE nationality_name LIKE "Djibouti";
UPDATE system_nationality SET iso = "DMA " WHERE nationality_name LIKE "Dominica";
UPDATE system_nationality SET iso = "DOM " WHERE nationality_name LIKE "Dominican Republic";
UPDATE system_nationality SET iso = "ECU " WHERE nationality_name LIKE "Ecuador";
UPDATE system_nationality SET iso = "EGY " WHERE nationality_name LIKE "Egypt";
UPDATE system_nationality SET iso = "SLV " WHERE nationality_name LIKE "El Salvador";
UPDATE system_nationality SET iso = "GNQ " WHERE nationality_name LIKE "Equatorial Guinea";
UPDATE system_nationality SET iso = "ERI " WHERE nationality_name LIKE "Eritrea";
UPDATE system_nationality SET iso = "EST " WHERE nationality_name LIKE "Estonia";
UPDATE system_nationality SET iso = "ETH " WHERE nationality_name LIKE "Ethiopia";
UPDATE system_nationality SET iso = "FLK " WHERE nationality_name LIKE "Falkland Islands (Malvinas)";
UPDATE system_nationality SET iso = "FRO " WHERE nationality_name LIKE "Faroe Islands";
UPDATE system_nationality SET iso = "FJI " WHERE nationality_name LIKE "Fiji";
UPDATE system_nationality SET iso = "FIN " WHERE nationality_name LIKE "Finland";
UPDATE system_nationality SET iso = "FRA " WHERE nationality_name LIKE "France";
UPDATE system_nationality SET iso = "GUF " WHERE nationality_name LIKE "French Guiana";
UPDATE system_nationality SET iso = "PYF " WHERE nationality_name LIKE "French Polynesia";
UPDATE system_nationality SET iso = "ATF " WHERE nationality_name LIKE "French Southern Territories";
UPDATE system_nationality SET iso = "GAB " WHERE nationality_name LIKE "Gabon";
UPDATE system_nationality SET iso = "GMB " WHERE nationality_name LIKE "Gambia";
UPDATE system_nationality SET iso = "GEO " WHERE nationality_name LIKE "Georgia";
UPDATE system_nationality SET iso = "DEU " WHERE nationality_name LIKE "Germany";
UPDATE system_nationality SET iso = "GHA " WHERE nationality_name LIKE "Ghana";
UPDATE system_nationality SET iso = "GIB " WHERE nationality_name LIKE "Gibraltar";
UPDATE system_nationality SET iso = "GRC " WHERE nationality_name LIKE "Greece";
UPDATE system_nationality SET iso = "GRL " WHERE nationality_name LIKE "Greenland";
UPDATE system_nationality SET iso = "GRD " WHERE nationality_name LIKE "Grenada";
UPDATE system_nationality SET iso = "GLP " WHERE nationality_name LIKE "Guadeloupe";
UPDATE system_nationality SET iso = "GUM " WHERE nationality_name LIKE "Guam";
UPDATE system_nationality SET iso = "GTM " WHERE nationality_name LIKE "Guatemala";
UPDATE system_nationality SET iso = "GGY " WHERE nationality_name LIKE "Guernsey";
UPDATE system_nationality SET iso = "GIN " WHERE nationality_name LIKE "Guinea";
UPDATE system_nationality SET iso = "GNB " WHERE nationality_name LIKE "Guinea-Bissau";
UPDATE system_nationality SET iso = "GUY " WHERE nationality_name LIKE "Guyana";
UPDATE system_nationality SET iso = "HTI " WHERE nationality_name LIKE "Haiti";
UPDATE system_nationality SET iso = "HMD " WHERE nationality_name LIKE "Heard Island and McDonald Islands";
UPDATE system_nationality SET iso = "VAT " WHERE nationality_name LIKE "Holy See (Vatican City State)";
UPDATE system_nationality SET iso = "HND " WHERE nationality_name LIKE "Honduras";
UPDATE system_nationality SET iso = "HKG " WHERE nationality_name LIKE "Hong Kong";
UPDATE system_nationality SET iso = "HUN " WHERE nationality_name LIKE "Hungary";
UPDATE system_nationality SET iso = "ISL " WHERE nationality_name LIKE "Iceland";
UPDATE system_nationality SET iso = "IND " WHERE nationality_name LIKE "India";
UPDATE system_nationality SET iso = "IDN " WHERE nationality_name LIKE "Indonesia";
UPDATE system_nationality SET iso = "IRN " WHERE nationality_name LIKE "Iran, Islamic Republic of";
UPDATE system_nationality SET iso = "IRQ " WHERE nationality_name LIKE "Iraq";
UPDATE system_nationality SET iso = "IRL " WHERE nationality_name LIKE "Ireland";
UPDATE system_nationality SET iso = "IMN " WHERE nationality_name LIKE "Isle of Man";
UPDATE system_nationality SET iso = "ISR " WHERE nationality_name LIKE "Israel";
UPDATE system_nationality SET iso = "ITA " WHERE nationality_name LIKE "Italy";
UPDATE system_nationality SET iso = "JAM " WHERE nationality_name LIKE "Jamaica";
UPDATE system_nationality SET iso = "JPN " WHERE nationality_name LIKE "Japan";
UPDATE system_nationality SET iso = "JEY " WHERE nationality_name LIKE "Jersey";
UPDATE system_nationality SET iso = "JOR " WHERE nationality_name LIKE "Jordan";
UPDATE system_nationality SET iso = "KAZ " WHERE nationality_name LIKE "Kazakhstan";
UPDATE system_nationality SET iso = "KEN " WHERE nationality_name LIKE "Kenya";
UPDATE system_nationality SET iso = "KIR " WHERE nationality_name LIKE "Kiribati";
UPDATE system_nationality SET iso = "PRK " WHERE nationality_name LIKE "Korea, Democratic People's Republic of";
UPDATE system_nationality SET iso = "KOR " WHERE nationality_name LIKE "Korea, Republic of";
UPDATE system_nationality SET iso = "KWT " WHERE nationality_name LIKE "Kuwait";
UPDATE system_nationality SET iso = "KGZ " WHERE nationality_name LIKE "Kyrgyzstan";
UPDATE system_nationality SET iso = "LAO " WHERE nationality_name LIKE "Lao People's Democratic Republic";
UPDATE system_nationality SET iso = "LVA " WHERE nationality_name LIKE "Latvia";
UPDATE system_nationality SET iso = "LBN " WHERE nationality_name LIKE "Lebanon";
UPDATE system_nationality SET iso = "LSO " WHERE nationality_name LIKE "Lesotho";
UPDATE system_nationality SET iso = "LBR " WHERE nationality_name LIKE "Liberia";
UPDATE system_nationality SET iso = "LBY " WHERE nationality_name LIKE "Libya";
UPDATE system_nationality SET iso = "LIE " WHERE nationality_name LIKE "Liechtenstein";
UPDATE system_nationality SET iso = "LTU " WHERE nationality_name LIKE "Lithuania";
UPDATE system_nationality SET iso = "LUX " WHERE nationality_name LIKE "Luxembourg";
UPDATE system_nationality SET iso = "MAC " WHERE nationality_name LIKE "Macao";
UPDATE system_nationality SET iso = "MKD " WHERE nationality_name LIKE "Macedonia, the former Yugoslav Republic of";
UPDATE system_nationality SET iso = "MDG " WHERE nationality_name LIKE "Madagascar";
UPDATE system_nationality SET iso = "MWI " WHERE nationality_name LIKE "Malawi";
UPDATE system_nationality SET iso = "MYS " WHERE nationality_name LIKE "Malaysia";
UPDATE system_nationality SET iso = "MDV " WHERE nationality_name LIKE "Maldives";
UPDATE system_nationality SET iso = "MLI " WHERE nationality_name LIKE "Mali";
UPDATE system_nationality SET iso = "MLT " WHERE nationality_name LIKE "Malta";
UPDATE system_nationality SET iso = "MHL " WHERE nationality_name LIKE "Marshall Islands";
UPDATE system_nationality SET iso = "MTQ " WHERE nationality_name LIKE "Martinique";
UPDATE system_nationality SET iso = "MRT " WHERE nationality_name LIKE "Mauritania";
UPDATE system_nationality SET iso = "MUS " WHERE nationality_name LIKE "Mauritius";
UPDATE system_nationality SET iso = "MYT " WHERE nationality_name LIKE "Mayotte";
UPDATE system_nationality SET iso = "MEX " WHERE nationality_name LIKE "Mexico";
UPDATE system_nationality SET iso = "FSM " WHERE nationality_name LIKE "Micronesia, Federated States of";
UPDATE system_nationality SET iso = "MDA " WHERE nationality_name LIKE "Moldova, Republic of";
UPDATE system_nationality SET iso = "MCO " WHERE nationality_name LIKE "Monaco";
UPDATE system_nationality SET iso = "MNG " WHERE nationality_name LIKE "Mongolia";
UPDATE system_nationality SET iso = "MNE " WHERE nationality_name LIKE "Montenegro";
UPDATE system_nationality SET iso = "MSR " WHERE nationality_name LIKE "Montserrat";
UPDATE system_nationality SET iso = "MAR " WHERE nationality_name LIKE "Morocco";
UPDATE system_nationality SET iso = "MOZ " WHERE nationality_name LIKE "Mozambique";
UPDATE system_nationality SET iso = "MMR " WHERE nationality_name LIKE "Myanmar";
UPDATE system_nationality SET iso = "NAM " WHERE nationality_name LIKE "Namibia";
UPDATE system_nationality SET iso = "NRU " WHERE nationality_name LIKE "Nauru";
UPDATE system_nationality SET iso = "NPL " WHERE nationality_name LIKE "Nepal";
UPDATE system_nationality SET iso = "NLD " WHERE nationality_name LIKE "Netherlands";
UPDATE system_nationality SET iso = "NCL " WHERE nationality_name LIKE "New Caledonia";
UPDATE system_nationality SET iso = "NZL " WHERE nationality_name LIKE "New Zealand";
UPDATE system_nationality SET iso = "NIC " WHERE nationality_name LIKE "Nicaragua";
UPDATE system_nationality SET iso = "NER " WHERE nationality_name LIKE "Niger";
UPDATE system_nationality SET iso = "NGA " WHERE nationality_name LIKE "Nigeria";
UPDATE system_nationality SET iso = "NIU " WHERE nationality_name LIKE "Niue";
UPDATE system_nationality SET iso = "NFK " WHERE nationality_name LIKE "Norfolk Island";
UPDATE system_nationality SET iso = "MNP " WHERE nationality_name LIKE "Northern Mariana Islands";
UPDATE system_nationality SET iso = "NOR " WHERE nationality_name LIKE "Norway";
UPDATE system_nationality SET iso = "OMN " WHERE nationality_name LIKE "Oman";
UPDATE system_nationality SET iso = "PAK " WHERE nationality_name LIKE "Pakistan";
UPDATE system_nationality SET iso = "PLW " WHERE nationality_name LIKE "Palau";
UPDATE system_nationality SET iso = "PSE " WHERE nationality_name LIKE "Palestine, State of";
UPDATE system_nationality SET iso = "PAN " WHERE nationality_name LIKE "Panama";
UPDATE system_nationality SET iso = "PNG " WHERE nationality_name LIKE "Papua New Guinea";
UPDATE system_nationality SET iso = "PRY " WHERE nationality_name LIKE "Paraguay";
UPDATE system_nationality SET iso = "PER " WHERE nationality_name LIKE "Peru";
UPDATE system_nationality SET iso = "PHL " WHERE nationality_name LIKE "Philippines";
UPDATE system_nationality SET iso = "PCN " WHERE nationality_name LIKE "Pitcairn";
UPDATE system_nationality SET iso = "POL " WHERE nationality_name LIKE "Poland";
UPDATE system_nationality SET iso = "PRT " WHERE nationality_name LIKE "Portugal";
UPDATE system_nationality SET iso = "PRI " WHERE nationality_name LIKE "Puerto Rico";
UPDATE system_nationality SET iso = "QAT " WHERE nationality_name LIKE "Qatar";
UPDATE system_nationality SET iso = "REU " WHERE nationality_name LIKE "Réunion";
UPDATE system_nationality SET iso = "ROU " WHERE nationality_name LIKE "Romania";
UPDATE system_nationality SET iso = "RUS " WHERE nationality_name LIKE "Russian Federation";
UPDATE system_nationality SET iso = "RWA " WHERE nationality_name LIKE "Rwanda";
UPDATE system_nationality SET iso = "BLM " WHERE nationality_name LIKE "Saint Barthélemy";
UPDATE system_nationality SET iso = "SHN " WHERE nationality_name LIKE "Saint Helena, Ascension and Tristan da Cunha";
UPDATE system_nationality SET iso = "KNA " WHERE nationality_name LIKE "Saint Kitts and Nevis";
UPDATE system_nationality SET iso = "LCA " WHERE nationality_name LIKE "Saint Lucia";
UPDATE system_nationality SET iso = "MAF " WHERE nationality_name LIKE "Saint Martin (French part)";
UPDATE system_nationality SET iso = "SPM " WHERE nationality_name LIKE "Saint Pierre and Miquelon";
UPDATE system_nationality SET iso = "VCT " WHERE nationality_name LIKE "Saint Vincent and the Grenadines";
UPDATE system_nationality SET iso = "WSM " WHERE nationality_name LIKE "Samoa";
UPDATE system_nationality SET iso = "SMR " WHERE nationality_name LIKE "San Marino";
UPDATE system_nationality SET iso = "STP " WHERE nationality_name LIKE "Sao Tome and Principe";
UPDATE system_nationality SET iso = "SAU " WHERE nationality_name LIKE "Saudi Arabia";
UPDATE system_nationality SET iso = "SEN " WHERE nationality_name LIKE "Senegal";
UPDATE system_nationality SET iso = "SRB " WHERE nationality_name LIKE "Serbia";
UPDATE system_nationality SET iso = "SYC " WHERE nationality_name LIKE "Seychelles";
UPDATE system_nationality SET iso = "SLE " WHERE nationality_name LIKE "Sierra Leone";
UPDATE system_nationality SET iso = "SGP " WHERE nationality_name LIKE "Singapore";
UPDATE system_nationality SET iso = "SXM " WHERE nationality_name LIKE "Sint Maarten (Dutch part)";
UPDATE system_nationality SET iso = "SVK " WHERE nationality_name LIKE "Slovakia";
UPDATE system_nationality SET iso = "SVN " WHERE nationality_name LIKE "Slovenia";
UPDATE system_nationality SET iso = "SLB " WHERE nationality_name LIKE "Solomon Islands";
UPDATE system_nationality SET iso = "SOM " WHERE nationality_name LIKE "Somalia";
UPDATE system_nationality SET iso = "ZAF " WHERE nationality_name LIKE "South Africa";
UPDATE system_nationality SET iso = "SGS " WHERE nationality_name LIKE "South Georgia and the South Sandwich Islands";
UPDATE system_nationality SET iso = "SSD " WHERE nationality_name LIKE "South Sudan";
UPDATE system_nationality SET iso = "ESP " WHERE nationality_name LIKE "Spain";
UPDATE system_nationality SET iso = "LKA " WHERE nationality_name LIKE "Sri Lanka";
UPDATE system_nationality SET iso = "SDN " WHERE nationality_name LIKE "Sudan";
UPDATE system_nationality SET iso = "SUR " WHERE nationality_name LIKE "Suriname";
UPDATE system_nationality SET iso = "SJM " WHERE nationality_name LIKE "Svalbard and Jan Mayen";
UPDATE system_nationality SET iso = "SWZ " WHERE nationality_name LIKE "Swaziland";
UPDATE system_nationality SET iso = "SWE " WHERE nationality_name LIKE "Sweden";
UPDATE system_nationality SET iso = "CHE " WHERE nationality_name LIKE "Switzerland";
UPDATE system_nationality SET iso = "SYR " WHERE nationality_name LIKE "Syrian Arab Republic";
UPDATE system_nationality SET iso = "TWN " WHERE nationality_name LIKE "Taiwan, Province of China";
UPDATE system_nationality SET iso = "TJK " WHERE nationality_name LIKE "Tajikistan";
UPDATE system_nationality SET iso = "TZA " WHERE nationality_name LIKE "Tanzania, United Republic of";
UPDATE system_nationality SET iso = "THA " WHERE nationality_name LIKE "Thailand";
UPDATE system_nationality SET iso = "TLS " WHERE nationality_name LIKE "Timor-Leste";
UPDATE system_nationality SET iso = "TGO " WHERE nationality_name LIKE "Togo";
UPDATE system_nationality SET iso = "TKL " WHERE nationality_name LIKE "Tokelau";
UPDATE system_nationality SET iso = "TON " WHERE nationality_name LIKE "Tonga";
UPDATE system_nationality SET iso = "TTO " WHERE nationality_name LIKE "Trinidad and Tobago";
UPDATE system_nationality SET iso = "TUN " WHERE nationality_name LIKE "Tunisia";
UPDATE system_nationality SET iso = "TUR " WHERE nationality_name LIKE "Turkey";
UPDATE system_nationality SET iso = "TKM " WHERE nationality_name LIKE "Turkmenistan";
UPDATE system_nationality SET iso = "TCA " WHERE nationality_name LIKE "Turks and Caicos Islands";
UPDATE system_nationality SET iso = "TUV " WHERE nationality_name LIKE "Tuvalu";
UPDATE system_nationality SET iso = "UGA " WHERE nationality_name LIKE "Uganda";
UPDATE system_nationality SET iso = "UKR " WHERE nationality_name LIKE "Ukraine";
UPDATE system_nationality SET iso = "ARE " WHERE nationality_name LIKE "United Arab Emirates";
UPDATE system_nationality SET iso = "GBR " WHERE nationality_name LIKE "United Kingdom";
UPDATE system_nationality SET iso = "USA " WHERE nationality_name LIKE "United States";
UPDATE system_nationality SET iso = "UMI " WHERE nationality_name LIKE "United States Minor Outlying Islands";
UPDATE system_nationality SET iso = "URY " WHERE nationality_name LIKE "Uruguay";
UPDATE system_nationality SET iso = "UZB " WHERE nationality_name LIKE "Uzbekistan";
UPDATE system_nationality SET iso = "VUT " WHERE nationality_name LIKE "Vanuatu";
UPDATE system_nationality SET iso = "VEN " WHERE nationality_name LIKE "Venezuela, Bolivarian Republic of";
UPDATE system_nationality SET iso = "VNM " WHERE nationality_name LIKE "Viet Nam";
UPDATE system_nationality SET iso = "VGB " WHERE nationality_name LIKE "Virgin Islands, British";
UPDATE system_nationality SET iso = "VIR " WHERE nationality_name LIKE "Virgin Islands, U.S.";
UPDATE system_nationality SET iso = "WLF " WHERE nationality_name LIKE "Wallis and Futuna";
UPDATE system_nationality SET iso = "ESH " WHERE nationality_name LIKE "Western Sahara";
UPDATE system_nationality SET iso = "YEM " WHERE nationality_name LIKE "Yemen";
UPDATE system_nationality SET iso = "ZMB " WHERE nationality_name LIKE "Zambia";
UPDATE system_nationality SET iso = "ZWE " WHERE nationality_name LIKE "Zimbabwe";


INSERT INTO `version` (`version`, date_version) VALUES ('3.0.5.u - stef', NOW());



ALTER TABLE `folder_item` ADD INDEX (`parentfolderfk`);
ALTER TABLE `folder_item` ADD INDEX (`rank`);
ALTER TABLE `folder_item` ADD INDEX (`itemfk`);

ALTER TABLE `folder_rights` ADD INDEX (`folderfk`);
ALTER TABLE `folder_rights` ADD INDEX (`loginfk`);

INSERT INTO `version` (`version`, date_version) VALUES ('3.0.6.u - stef', NOW());