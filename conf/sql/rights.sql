-- VERSION 2.5.0
-- Change the way rights were stored (only parent rights, not all the details
-- removed mismatching rights
-- added missing ones
-- change descriptions and renamed a few one s for admin panel

-- !!! require to regenerate rights for all users !!!

CREATE TABLE IF NOT EXISTS `right` (
  `rightpk` int(11) NOT NULL AUTO_INCREMENT,
  `label` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` text COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `cp_uid` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `cp_action` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `cp_type` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `cp_pk` int(11) NOT NULL,
  PRIMARY KEY (`rightpk`),
  KEY `cp_uid` (`cp_uid`),
  KEY `cp_action` (`cp_action`),
  KEY `cp_type` (`cp_type`),
  KEY `cp_uid_2` (`cp_uid`,`cp_action`,`cp_type`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=200 ;

--
-- Dumping data for table `right`
--

INSERT INTO `right` (`rightpk`, `label`, `description`, `type`, `cp_uid`, `cp_action`, `cp_type`, `cp_pk`) VALUES
(1, 'Addressbook admin', 'Full access to addressbook, with access to other people data and delete features', 'right', '777-249', 'right_admin', '', 0),
(2, 'Addressbook manager', 'Can access most of the features. Can''t delete connection or companies', 'right', '777-249', 'right_manager', '', 0),
(3, 'Addressbook viewer', 'Can view amd browse connection and company lists', 'right', '777-249', 'right_viewer', '', 0),
(4, 'View connection', 'View connection ', 'alias', '777-249', 'ppav', 'ct', 0),
(5, 'List connections', 'list / search connection', 'alias', '777-249', 'ppal', 'ct', 0),
(6, 'View company', 'View company ', 'alias', '777-249', 'ppav', 'cp', 0),
(7, 'List companies', 'list / search companies', 'alias', '777-249', 'ppal', 'cp', 0),
(8, 'Login static access', 'Allow to access login', 'static', '579-704', '', '', 0),
(9, 'Project Admin', 'Full access to the project component. Can manage other people''s tasks and projects.', 'right', '456-789', 'right_admin', '', 0),
(10, 'Project Manager', 'Can access most of the features. Can not remove the projects and tasks', 'right', '456-789', 'right_manager', '', 0),
(11, 'Project Viewer', 'Can View the list of the projects and view the project information', 'right', '456-789', 'right_viewer', '', 0),
(12, 'View project', 'View Project ', 'alias', '456-789', 'ppav', 'prj', 0),
(13, 'List project', 'List project ', 'alias', '456-789', 'ppal', 'prj', 0),
(14, 'Sharedspace admin', 'Full access to sharedspace component. Can manage other people''s documents.', 'right', '999-111', 'right_admin', '', 0),
(15, 'Sharedspace manager', 'Access to most of the features but can not remove the shared document', 'right', '999-111', 'right_manager', '', 0),
(16, 'List docs', 'List Shared Documents ', 'alias', '999-111', 'ppal', 'shdoc', 0),
(17, 'Downlaod docs', 'Download Shared Documents ', 'alias', '999-111', 'ppasen', 'shdoc', 0),
(18, 'Add Company', 'Access rights to add a new company', 'alias', '777-249', 'ppaa', 'cp', 0),
(19, 'Add Connection', 'Access rights to add a new connection', 'alias', '777-249', 'ppaa', 'ct', 0),
(20, 'Edit Company', 'Access Rights to edit company', 'alias', '777-249', 'ppae', 'cp', 0),
(21, 'Edit Connection', 'Access Rights to edit connection', 'alias', '777-249', 'ppae', 'ct', 0),
(22, 'Save new company', 'Access rights to save Company', 'alias', '777-249', 'ppasa', 'cp', 0),
(23, 'Save new connection', 'Access rights to save Connection', 'alias', '777-249', 'ppasa', 'ct', 0),
(24, 'Save existing company', 'Access rights to save Edited Company', 'alias', '777-249', 'ppase', 'cp', 0),
(25, 'Save existing connection', 'Access rights to save Edited Connection', 'alias', '777-249', 'ppase', 'ct', 0),
(26, 'Change company account manager', 'Access Right to change company account manager', 'alias', '777-249', 'ppat', 'cp', 0),
(27, 'Change connection account manager', 'Access Right to change connection account manager', 'alias', '777-249', 'ppat', 'ct', 0),
(28, 'Manage company profile', 'Access right to link company', 'alias', '777-249', 'ppam', 'cp', 0),
(29, 'Manage connection profile', 'Access right to link connection', 'alias', '777-249', 'ppam', 'ct', 0),
(30, 'Save Company Account Manager', 'Access right to save company account manager', 'alias', '777-249', 'ppast', 'cp', 0),
(31, 'Save Connection Account Manager', 'Access right to save connection account manager', 'alias', '777-249', 'ppast', 'ct', 0),
(32, 'Save Link Company', 'Access right to save link company ', 'alias', '777-249', 'ppasm', 'cp', 0),
(33, 'Save Link Connection ', 'Access right to save link connection', 'alias', '777-249', 'ppasm', 'ct', 0),
(34, 'Webmail Static Access', 'Static access for the webmail component', 'static', '009-724', '', '', 0),
(35, 'Delete Company', 'Right to remove the company', 'alias', '777-249', 'ppad', 'cp', 0),
(36, 'Delete Connection', 'Right to remove the connection', 'alias', '777-249', 'ppad', 'ct', 0),
(37, 'Add Business Profile', 'Add business profile to  connection', 'alias', '777-249', 'ppaa', 'cpr', 0),
(38, 'Save Business Profile', 'Save business profile to  connection', 'alias', '777-249', 'ppacpr', 'cpr', 0),
(39, 'Upload document', 'Access to upload document', 'alias', '777-249', 'ppaa', 'doc', 0),
(40, 'save uploaded document', 'Access to save the uploaded document', 'alias', '777-249', 'ppasa', 'doc', 0),
(41, 'Download  connection document', 'Access to download connection document', 'alias', '777-249', 'ppasen', 'ct', 0),
(42, 'Download company document', 'Access to download company document', 'alias', '777-249', 'ppasen', 'cp', 0),
(47, 'Add activities ', 'Access to add the events ', 'alias', '007-770', 'ppaa', 'event', 0),
(48, 'Edit activities ', 'Access to edit the events ', 'alias', '007-770', 'ppae', 'event', 0),
(49, 'Delete activities ', 'Access to remove the events ', 'alias', '007-770', 'ppad', 'event', 0),
(50, 'Save activities ', 'Access Right to save the events', 'alias', '007-770', 'ppasa', 'event', 0),
(51, 'Save Project', 'Access right to save project', 'alias', '456-789', 'ppasa', 'prj', 0),
(52, 'Save Edited Project', 'Access right to save edited project', 'alias', '456-789', 'ppase', 'prj', 0),
(53, 'Delete Project', 'Access right to remove the project', 'alias', '456-789', 'ppad', 'prj', 0),
(54, 'Listing Tasks', 'Access right to list task ', 'alias', '456-789', 'ppal', 'task', 0),
(55, 'Add Task', 'Access right to add task ', 'alias', '456-789', 'ppaa', 'task', 0),
(56, 'Save Added Task', 'Access right to save added task ', 'alias', '456-789', 'ppasa', 'task', 0),
(57, 'Save Edited Task', 'Access right to save edited task ', 'alias', '456-789', 'ppase', 'task', 0),
(58, 'Edit Task', 'Access right to edit task ', 'alias', '456-789', 'ppae', 'task', 0),
(59, 'Update Task', 'Access right to update task ', 'alias', '456-789', 'ppaupd', 'task', 0),
(60, 'Update Task Status', 'Access right to update task status', 'alias', '456-789', 'ppado', 'task', 0),
(61, 'Delete Task', 'Access right to remove task', 'alias', '456-789', 'ppad', 'task', 0),
(62, 'Upload attachment to project ', 'Access right to upload attachment to project', 'alias', '456-789', 'ppaa', 'attch', 0),
(63, 'Save Project Actors ', 'Access right to save project actors', 'alias', '456-789', 'ppase', 'prjacr', 0),
(64, 'View Graphical View ', 'Access right to view graphical view ', 'alias', '456-789', 'ppavd', 'prj', 0),
(65, 'View Task ', 'Access right to view task ', 'alias', '456-789', 'ppav', 'task', 0),
(66, 'Save Added Attachment for Project ', 'Access right to save added attachment for the project ', 'alias', '456-789', 'ppasa', 'attch', 0),
(67, 'Save Edited Attachment for Project ', 'Access right to save edited attachment for the project ', 'alias', '456-789', 'ppase', 'attch', 0),
(68, 'Edit Project Actors ', 'Access right to edit project actors ', 'alias', '456-789', 'ppae', 'prjacr', 0),
(69, 'Static Mail Access', 'Static access for the BCMedia email link', 'static', '845-187', '', '', 0),
(70, 'Search Companies List ', 'Access right to search companies list in the selector ', 'alias', '777-249', 'ppasea', 'cp', 0),
(71, 'Save Business Add Profile ', 'Access to save business add profile', 'alias', '777-249', 'ppasa', 'cpr', 0),
(72, 'Save Business Edit Profile ', 'Access to save business edit profile', 'alias', '777-249', 'ppase', 'cpr', 0),
(73, 'Edit Business Profile', 'Access right to edit business profile', 'alias', '777-249', 'ppae', 'cpr', 0),
(74, 'Sharedspace management', 'Access right to edit and delete sharedspace ', 'alias', '999-111', 'ppam', 'shdoc', 0),
(75, 'Edit Sharedspace document', 'Access to edit shared space document', 'alias', '999-111', 'ppae', 'shdoc', 0),
(76, 'Save added Sharedspace document', 'Access to add shared space document', 'alias', '999-111', 'ppasa', 'shdoc', 0),
(77, 'Save edited Sharedspace document', 'Access to save shared space document', 'alias', '999-111', 'ppase', 'shdoc', 0),
(78, 'Add Sharedspace document', 'Access to add shared space document', 'alias', '999-111', 'ppaa', 'shdoc', 0),
(79, 'Delete sharedspace', 'Access right to delete shared space document', 'alias', '999-111', 'ppad', 'shdoc', 0),
(80, 'Add Project ', 'Access right to add new project', 'alias', '456-789', 'ppaa', 'prj', 0),
(81, 'Edit Project', 'Access right to edit project', 'alias', '456-789', 'ppae', 'prj', 0),
(82, 'Static Form Access', 'Static form access', 'static', '668-313', '', '', 0),
(83, 'Edit the attachment of company or connection', 'Access right to edit the attachment of company or connection', 'alias', '777-249', 'ppae', 'doc', 0),
(84, 'Delete the attachment of company or connection', 'Access right to delete attachment of company or connection', 'alias', '777-249', 'ppad', 'doc', 0),
(85, 'Customfields Admin', 'Admin right for custom field component. Can add fields for all database or delete customfields', 'right', '180-290', 'right_admin', '', 0),
(86, 'Customfields Manager', 'Can add one field at one time. Can not update the existing custom fields', 'right', '180-290', 'right_manager', '', 0),
(87, ' Add custom fields', 'Access right to add custom fields ', 'alias', '180-290', 'ppaa', 'csm', 0),
(88, ' Edit custom fields', 'Access right to edit custom fields ', 'alias', '180-290', 'ppae', 'csm', 0),
(89, ' Save custom fields', 'Access right to save added custom fields ', 'alias', '180-290', 'ppasa', 'csm', 0),
(90, ' Update custom fields', 'Access right to update  custom fields ', 'alias', '180-290', 'ppau', 'csm', 0),
(91, 'Add custom fields for all items', 'Access right to add custom field for all the entries', 'alias', '180-290', 'ppaall', 'csm', 0),
(94, 'Static right for portal', 'Static access for portal component', 'static', '111-111', '', '', 0),
(95, 'Static right for charts', 'Static access for charts component', 'static', '222-222', '', '', 0),
(96, 'Static right for zimbra', 'Static access for zimbra component', 'static', '400-650', '', '', 0),
(97, 'Delete activity reminders', 'Allow to delete reminders set on events', 'alias', '007-770', 'ppad', 'evtrem', 0),
(98, 'Opportunity admin', 'Allow to manage other people''s opportunities and change the status to "paid"', 'right', '555-123', 'right_op_paiement', '', 0),
(99, 'Opportunity paiement', 'Allow to change an opportunity status to payed.', 'alias', '555-123', 'ppafe', 'pai', 0),
(100, 'Opportunity edit', 'Opportunity edition form.', 'alias', '555-123', 'ppae', '', 0),
(101, 'Opportunity add', 'Opportunity addition form. ', 'alias', '555-123', 'ppaa', '', 0),
(102, 'Alias add opportunity saving', 'Saving opportunity addition.', 'alias', '555-123', 'ppase', '', 0),
(103, 'Alias edit opportunity saving', 'Saving opportunity edition.', 'alias', '555-123', 'ppasa', '', 0),
(104, 'Opportunity manager', 'Adding and editing opportunities untill paiement.', 'right', '555-123', 'right_op_managment', '', 0),
(105, 'Public charts', 'Display public charts.', 'static', '222-222', 'ppav', '', 0),
(106, 'My opportunities listing', 'My opportunities listing', 'alias', '555-123', 'ppal', 'opp', 0),
(107, 'Delete profile', 'Alias allowing to delete connection profiles', 'alias', '777-249', 'ppad', 'cpr', 0),
(110, 'shift_wide_css', 'Allow user to shift between std or wide css', 'static', '665-544', '', 'stgsys', 0),
(112, 'Alias AB ssearch connection ', 'Alias allowing to use the connection selector.', 'alias', '777-249', 'ppasea', 'ct', 0);

-- --------------------------------------------------------

--
-- Table structure for table `right_tree`
--

CREATE TABLE IF NOT EXISTS `right_tree` (
  `right_treepk` int(11) NOT NULL AUTO_INCREMENT,
  `rightfk` int(11) NOT NULL,
  `parentfk` int(11) NOT NULL,
  PRIMARY KEY (`right_treepk`),
  UNIQUE KEY `rightfk_2` (`rightfk`,`parentfk`),
  KEY `rightfk` (`rightfk`),
  KEY `parentfk` (`parentfk`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=200 ;

--
-- Dumping data for table `right_tree`
--

INSERT INTO `right_tree` (`right_treepk`, `rightfk`, `parentfk`) VALUES
(1, 2, 1),
(180, 26, 1),
(181, 27, 1),
(182, 30, 1),
(7, 3, 2),
(8, 4, 2),
(10, 6, 2),
(12, 5, 3),
(13, 7, 3),
(179, 11, 9),
(18, 11, 10),
(19, 12, 11),
(20, 13, 11),
(23, 15, 14),
(26, 16, 15),
(27, 17, 15),
(183, 31, 1),
(184, 35, 1),
(185, 36, 1),
(186, 84, 1),
(32, 18, 2),
(33, 19, 2),
(34, 20, 2),
(35, 21, 2),
(188, 99, 98),
(44, 22, 2),
(45, 23, 2),
(46, 24, 2),
(47, 25, 2),
(58, 28, 2),
(59, 29, 2),
(62, 32, 2),
(63, 33, 2),
(67, 37, 2),
(69, 38, 2),
(72, 39, 2),
(73, 40, 2),
(76, 41, 2),
(77, 42, 2),
(81, 47, 2),
(82, 48, 2),
(88, 49, 2),
(89, 50, 2),
(93, 53, 9),
(94, 51, 10),
(95, 52, 10),
(97, 54, 11),
(100, 55, 10),
(102, 56, 10),
(104, 57, 10),
(106, 58, 10),
(108, 59, 10),
(110, 60, 10),
(111, 61, 9),
(113, 62, 10),
(115, 63, 10),
(117, 64, 11),
(120, 65, 11),
(124, 66, 10),
(125, 67, 10),
(127, 68, 10),
(129, 70, 2),
(131, 71, 2),
(133, 72, 2),
(135, 73, 2),
(137, 74, 15),
(139, 75, 15),
(141, 76, 15),
(143, 77, 15),
(145, 78, 15),
(147, 79, 15),
(149, 80, 10),
(151, 81, 10),
(153, 83, 2),
(156, 88, 86),
(158, 90, 86),
(162, 86, 85),
(163, 89, 86),
(164, 91, 86),
(165, 87, 86),
(167, 97, 2),
(168, 104, 98),
(169, 100, 104),
(170, 101, 104),
(171, 102, 104),
(172, 103, 104),
(173, 106, 104),
(174, 107, 2),
(175, 112, 2);
